!function(){"use strict";angular.module("kt.pano").controller("ktProductAssetManageCtrl",["$scope","$rootScope","$state","$location","ktSweetAlert","ktDataHelper","ktProductsService",function(a,b,c,d,e,f,g){var h=a.shared,i=d.search(),j=["name","from","credit_manager","manage_org"];a.shared.placeholderText="请输入产品名称、平台名称、管理人类型或管理机构";var k=[{value:"rate_in",type:"dropdown"},{value:"credit_manager_eq",type:"dropdown"}];a.gotoDetail=function(a){"Product"===a["class"]?c.go("pano.productAssetManage",{id:a.id}):e.swal({title:"提示",timer:1500,text:"该产品暂未录入详情"})},a.updatedAtSortTitle=function(){return"updated_at"===i.sort_by?"asc"===i.order?"点击按更新时间由新到旧排序":"点击取消按更新时间排序":"点击按更新时间由旧到新排序"},a.rateSortTitle=function(){return"rate"===i.sort_by?"asc"===i.order?"点击按年化收益率由大到小排序":"点击取消按年化收益率排序":"点击按年化收益率由小到大排序"},h.tabActive.tab1=!0,h._params.created_or_updated_in=_.isString(i.created_or_updated_in)?i.created_or_updated_in.split(","):i.created_or_updated_in||[],h._params.totalItems=0,$.extend(h.params,i,{credit_right_or_eq:"am"}),h._params.page=h.params.page,f.pruneDirtyParams(h.params,i,["order","sort_by","created_or_updated_in","search_fields[]"]),f.intFitlerStatus(a,i),h.filterDatas?(h.filters=h.filterDatas[1],f.filterInit(h.filters,k)(h.params)):g.get({content:"settings"},function(a){h.filterDatas=a,h.filters=a[1],f.filterInit(h.filters,k)(h.params)}),g.get(f.cutDirtyParams(h.params),function(b){a.products=b.products,a.updateTime=b.latest_uptime,b.summary.find.search_results&&(b.summary.find.search_results=_.filter(b.summary.find.search_results,function(a){return 0!==a.search_count}),b.summary.find.search_results.sort(function(a,b){return _.indexOf(j,a.name)>_.indexOf(j,b.name)?1:_.indexOf(j,a.name)<_.indexOf(j,b.name)?-1:0})),a.summary=b.summary,h._params.totalItems=b.summary.find.count,h._params.totalPages=_.ceil(b.summary.find.count/h.params.per_page),h.params.page=i.page||h.params.page,a.pageChanged=function(){d.search("page",h.params.page)},a.$watch("shared._params.created_or_updated_in.length",function(){_.isArray(h._params.created_or_updated_in)&&c.go(c.current.name,{created_or_updated_in:h._params.created_or_updated_in.sort().join()})})})}])}();