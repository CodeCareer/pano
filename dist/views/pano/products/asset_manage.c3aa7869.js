!function(){"use strict";angular.module("kt.pano").controller("ktProductAssetManageCtrl",["$scope","$state","$location","ktSweetAlert","ktDataHelper","ktProductsService",function(a,b,c,d,e,f){var g=a.shared,h=c.search(),i=[{value:"rate_in",type:"dropdown"},{value:"credit_manager_eq",type:"dropdown"}];a.gotoDetail=function(a){"Product"===a["class"]?b.go("pano.productAssetManage",{id:a.id}):d.swal({title:"提示",timer:1500,text:"该产品暂未录入详情"})},g.tabActive.tab1=!0,h.created_or_updated_in=_.isString(h.created_or_updated_in)?h.created_or_updated_in.split(","):h.created_or_updated_in||[],g._params.totalItems=0,$.extend(g.params,h,{credit_right_or_eq:"am"}),g._params.page=g.params.page,e.pruneDirtyParams(g.params,h,["order","sort_by"]),e.intFitlerStatus(a,h),g.filterDatas?(g.filters=g.filterDatas[1],e.filterInit(g.filters,i)(g.params)):f.get({content:"settings"},function(a){g.filterDatas=a,g.filters=a[1],e.filterInit(g.filters,i)(g.params)}),f.get(e.cutDirtyParams(g.params),function(d){a.products=d.products,a.summary=d.summary,g._params.totalItems=d.summary.find.count,g._params.totalPages=_.ceil(d.summary.find.count/g.params.per_page),g.params.page=h.page,a.pageChanged=function(){c.search("page",g.params.page)},a.$watch("shared.params.created_or_updated_in.length",function(){_.isArray(g.params.created_or_updated_in)&&b.go(b.current.name,{created_or_updated_in:g.params.created_or_updated_in.join()})})}),a.searchTabActiveIndex=-1,a.searchTabClick=function(b,c){a.searchTabActiveIndex=c,f.get($.extend({"search_fields[]":b},e.cutDirtyParams(g.params)),function(b){a.products=b.products,g._params.totalItems=b.summary.find.count,g._params.totalPages=_.ceil(b.summary.find.count/g.params.per_page),a.$emit("totalItemGot",h)})}}])}();