!function(){"use strict";angular.module("kt.pano").controller("ktProductObligatoryRightCtrl",["$scope","$rootScope","$state","$location","ktDataHelper","ktProductsService","ktSweetAlert",function(a,b,c,d,e,f,g){var h,i=a.shared,j=a.search=d.search(),k=[{value:"life_days_in",type:"dropdown"},{value:"rate_in",type:"dropdown"},{value:"asset_type_eq",type:"dropdown"}];a.updatedAtSortTitle=function(){return"updated_at"===j.sort_by?"asc"===j.order?"点击按更新时间由新到旧排序":"点击取消按更新时间排序":"点击按更新时间由旧到新排序"},a.rateSortTitle=function(){return"rate"===j.sort_by?"asc"===j.order?"点击按年化收益率由大到小排序":"点击取消按年化收益率排序":"点击按年化收益率由小到大排序"},a.gotoDetail=function(a){"Product"===a["class"]?c.go("pano.productObligatoryRight",{id:a.id}):g.swal({title:"提示",timer:1500,text:"该产品暂未录入详情"})},i.tabActive.tab0=!0,i._params.created_or_updated_in=_.isString(j.created_or_updated_in)?j.created_or_updated_in.split(","):j.created_or_updated_in||[],i._params.totalItems=0,$.extend(i.params,j,{credit_right_or_eq:"bond"}),i._params.page=i.params.page,e.pruneDirtyParams(i.params,j,["order","sort_by","created_or_updated_in"]),e.intFitlerStatus(a,j),i.filterDatas?(i.filters=i.filterDatas[0],e.filterInit(i.filters,k)(i.params)):f.get({content:"settings"},function(a){i.filterDatas=a,i.filters=a[0],e.filterInit(i.filters,k)(i.params)}),f.get(e.cutDirtyParams(i.params),function(b){h=b,a.products=b.products,a.summary=b.summary,i._params.totalItems=b.summary.find.count,i._params.totalPages=_.ceil(b.summary.find.count/i.params.per_page),i.params.page=j.page||i.params.page,a.pageChanged=function(){d.search("page",i.params.page)},a.$watch("shared._params.created_or_updated_in.length",function(){_.isArray(i._params.created_or_updated_in)&&c.go(c.current.name,{created_or_updated_in:i._params.created_or_updated_in.sort().join()})})}),a.searchTabActiveIndex=-1,a.searchTabClick=function(b,c){a.searchResultAllActive=!1,a.searchTabActiveIndex=c,f.get($.extend({"search_fields[]":b},e.cutDirtyParams(i.params)),function(b){a.products=b.products,i._params.totalItems=b.summary.find.count,i._params.totalPages=_.ceil(b.summary.find.count/i.params.per_page)})},a.searchResultAllActive=!1,a.showAllSearchResults=function(){a.searchResultAllActive=!0,a.searchTabActiveIndex=-1,a.products=h.products,i._params.totalItems=h.summary.find.count,i._params.totalPages=_.ceil(h.summary.find.count/i.params.per_page)}}])}();