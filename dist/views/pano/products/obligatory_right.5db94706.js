!function(){"use strict";angular.module("kt.pano").controller("ktProductObligatoryRightCtrl",["$scope","$state","$location","ktDataHelper","ktProductsService","ktSweetAlert",function(a,b,c,d,e,f){var g,h=a.shared,i=a.search=c.search(),j=[{value:"life_days_in",type:"dropdown"},{value:"rate_in",type:"dropdown"},{value:"asset_type_eq",type:"dropdown"}];a.gotoDetail=function(a){"Product"===a["class"]?b.go("pano.productObligatoryRight",{id:a.id}):f.swal({title:"提示",timer:1500,text:"该产品暂未录入详情"})},h.tabActive.tab0=!0,h._params.created_or_updated_in=_.isString(i.created_or_updated_in)?i.created_or_updated_in.split(","):i.created_or_updated_in||[],h._params.totalItems=0,$.extend(h.params,i,{credit_right_or_eq:"bond"}),h._params.page=h.params.page,d.pruneDirtyParams(h.params,i,["order","sort_by","created_or_updated_in"]),d.intFitlerStatus(a,i),h.filterDatas?(h.filters=h.filterDatas[0],d.filterInit(h.filters,j)(h.params)):e.get({content:"settings"},function(a){h.filterDatas=a,h.filters=a[0],d.filterInit(h.filters,j)(h.params)}),e.get(d.cutDirtyParams(h.params),function(d){g=d,a.products=d.products,a.summary=d.summary,h._params.totalItems=d.summary.find.count,h._params.totalPages=_.ceil(d.summary.find.count/h.params.per_page),h.params.page=i.page||h.params.page,a.pageChanged=function(){c.search("page",h.params.page)},a.$watch("shared._params.created_or_updated_in.length",function(){_.isArray(h._params.created_or_updated_in)&&b.go(b.current.name,{created_or_updated_in:h._params.created_or_updated_in.sort().join()})})}),a.searchTabActiveIndex=-1,a.searchTabClick=function(b,c){a.searchResultAllActive=!1,a.searchTabActiveIndex=c,e.get($.extend({"search_fields[]":b},d.cutDirtyParams(h.params)),function(b){a.products=b.products,h._params.totalItems=b.summary.find.count,h._params.totalPages=_.ceil(b.summary.find.count/h.params.per_page)})},a.searchResultAllActive=!1,a.showAllSearchResults=function(){a.searchResultAllActive=!0,a.searchTabActiveIndex=-1,a.products=g.products,h._params.totalItems=g.summary.find.count,h._params.totalPages=_.ceil(g.summary.find.count/h.params.per_page)}}])}();