!function(){"use strict";angular.module("kt.pano").controller("ktOrderLayoutCtrl",["$scope","$state","$filter","$window","$location","ktSweetAlert","ktDataHelper","ktAssetIntentionService",function(a,b,c,d,e,f,g,h){var i=g.getPerPage(),j=e.search();a.shared={};var k=a.shared.params=$.extend({page:1,per_page:i},j);a.shared._params={totalItems:10,maxSize:d.innerWidth>480?10:3},a.shared.tabActive={tab0:!1,tab1:!1},a.tabSelect=function(a,c){b.current.name!==a&&($.extend(k,{tab:c,page:1,per_page:i,status_eq:null,asset_type_eq:null,guarantees_eq:null,rate_in:null,sort_by:null,order:null,life_days_in:null}),b.go(a,k))},a.goTo=function(a,c){var d={};d[a]=c,b.go(b.current.name,d)},a.$on("totalItemGot",function(b,c){k.page=c.page,a.pageChanged=function(){e.search("page",k.page)}}),a.getPublishDate=function(a,b){var c=a?moment(a).format("YYYY-MM-DD"):"-",d=b?moment(b).format("YYYY-MM-DD"):"-";return a&&b?c+" ~ "+d:!b&&a?c:b&&!a?"至"+d:"-"},a.getRate=function(a,b){return _.isNil(a)&&_.isNil(b)?"-":_.isNil(a)&&!_.isNil(b)?b.toFixed(2)+"%":_.isNil(b)&&!_.isNil(a)?a.toFixed(2)+"%":a===b?a.toFixed(2)+"%":a.toFixed(2)+"%-"+b.toFixed(2)+"%"},a.getStatus=function(a){return"已发布"===a?"可预约":"预约结束"===a?"已售罄":a||"-"},a.getLife=function(a){var b=_.isNaN(+a)||_.isNil(a)||""===a?a||"-":a+"天";return b},a.contactMe=function(a){f.swal({title:"对该资产有意向",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,text:"如果您对该资产有意向，我们将尽快与您联系。"},function(b){b&&h.save({asset_id:a},function(){f.swal({title:"已收到您的要求，开通金融会尽快与您联系",type:"success",text:'<i class="icon-pano icon-phone mr5 f1_2rem"></i><a class="mr20">010-84551488</a><i class="icon-pano icon-message mr5 f1_2rem"></i><a href="mailto:HelloPano@ktjr.com">HelloPano@ktjr.com</a>',html:!0})},function(){f.error("抱歉！服务器繁忙。")})})},a.showPoint=function(a){var b=function(a){var b=c("ktFontFamilyIgnore")(a);return b=c("ktFontSizeIgnore")(b),b=c("ktParagraphStyleIgnore")(b),b=b.replace(/<p[^>]*>(?:<embed[^>]+>(?:<\/embed>)?)*\s*<\/p>/g,"")};f.swal({title:'<h5 class="text-left f1_6rem">项目亮点</h5>',html:!0,text:'<div class="asset-point-list text-left lh1_5em">'+b(a)+"</div>"})},a.shared.filters=[],a.shared.filtersDatas=null,a.getConditionName=g.getConditionName(a.shared.filters)}])}();