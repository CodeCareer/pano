!function(){"use strict";angular.module("kt.common").directive("ktLineMenu",["$timeout","$window",function(a,b){return{restrict:"A",scope:{menuData:"=menuData",menuChange:"&"},link:function(c,d){function e(){var a,c=d.find(".active");j=parseInt(h.data("offset")),b.innerWidth<=480&&(j=parseInt(h.data("mobile-offset"))),c.length?(a=_.isNaN(j)?c.position().left:j+c.position().left,i=i||c.width()+"px",h.css({width:i,left:a+"px"})):h.css({left:"100%"})}var f,g,h=d.find(".line"),i=h.data("width"),j=parseInt(h.data("offset"));b.innerWidth<=480&&(j=parseInt(h.data("mobile-offset"))),a(function(){f=c.menuData&&void 0!==c.menuData.index?d.find(".child").eq(c.menuData.index):d.find(".active"),f.length?(i=i||f.width()+"px",g=_.isNaN(j)?f.position().left:f.position().left+j,h.css({width:i,left:g+"px"})):h.css({left:"100%"})},10),$(b).on("resize",e),c.$on("lineMenuUpdate",function(b,c){a(e,10)}),d.find(".child").on("mouseenter",function(){i=i||$(this).width()+"px";var a=_.isNaN(j)?$(this).position().left:j+$(this).position().left;h.css({width:i,left:a+"px"})}).on("mouseleave",e).on("click",function(){var a=this,b=$(a).attr("menu-value");c.$apply(function(){c.menuData&&(c.menuData.value=b),c.menuData&&(c.menuData.index=$(a).index()),c.menuChange({value:b})})})}}}])}();